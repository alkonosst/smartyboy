Version 4
SHEET 1 880 680
WIRE 80 -400 -80 -400
WIRE 240 -400 80 -400
WIRE 416 -400 240 -400
WIRE 592 -400 416 -400
WIRE 80 -368 80 -400
WIRE 416 -368 416 -400
WIRE 592 -272 592 -400
WIRE 416 -240 416 -288
WIRE 416 -240 176 -240
WIRE 240 -192 240 -400
WIRE 176 -176 176 -240
WIRE 208 -176 176 -176
WIRE 416 -176 416 -240
WIRE 368 -160 272 -160
WIRE 592 -160 592 -192
WIRE 80 -144 80 -288
WIRE 208 -144 80 -144
WIRE 80 -112 80 -144
WIRE 240 -96 240 -128
WIRE -80 -64 -80 -400
WIRE -112 -48 -144 -48
WIRE 32 -32 -48 -32
WIRE -112 -16 -272 -16
WIRE -144 16 -144 -48
WIRE 80 16 80 -16
WIRE 80 16 -144 16
WIRE -272 32 -272 -16
WIRE -80 48 -80 0
WIRE 80 96 80 16
WIRE 416 96 416 -80
WIRE -272 144 -272 112
WIRE 80 208 80 176
WIRE 416 208 416 176
FLAG -272 144 0
FLAG -80 48 0
FLAG 80 208 0
FLAG 416 208 0
FLAG 240 -96 0
FLAG 592 -160 0
SYMBOL res 64 80 R0
SYMATTR InstName R1
SYMATTR Value 1.5k
SYMBOL OpAmps\\opamp2 -80 -96 R0
SYMATTR InstName U1
SYMATTR Value LM358
SYMBOL OpAmps\\opamp2 240 -224 R0
SYMATTR InstName U2
SYMATTR Value LM358
SYMBOL nmos 32 -112 R0
SYMATTR InstName M1
SYMATTR Value AO3400
SYMATTR Prefix X
SYMBOL pmos 368 -80 M180
SYMATTR InstName M2
SYMATTR Value AO3401A
SYMATTR Prefix X
SYMBOL res 64 -384 R0
SYMATTR InstName R2
SYMATTR Value 500
SYMBOL res 400 -384 R0
SYMATTR InstName R3
SYMATTR Value 50
SYMBOL res 400 80 R0
SYMATTR InstName R4
SYMATTR Value 500
SYMBOL voltage -272 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 3.3 1 0 0 1)
SYMBOL voltage 592 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
TEXT -256 272 Left 2 !.include spice/opamp-LM358.mod
TEXT -248 248 Left 2 !.tran 2
TEXT -256 296 Left 2 !.include spice/nmos-AO3400.mod
TEXT -256 320 Left 2 !.include spice/pmos-AO3401A.mod
TEXT -256 344 Left 2 !.include spice/opamp-LM324.mod
